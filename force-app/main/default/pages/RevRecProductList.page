<apex:page sidebar="false" id="page" Controller="RevRecProductListController">
    
    <!-- Script to search the product list on Enter keypress -->
     <script type="text/javascript">

   		function submitForm(eve) {      
  			 if (eve.which == 13 || eve.keyCode == 13) {
   				 document.getElementById('mainpage:ProductListPage:page:form:pb:searchButton').click();
   				 return false;
  			 }
  		}   
  		document.onkeypress = submitForm 
 	</script>
 	
    <!-- Form -->
    <apex:form id="form">
        
        <!-- Block UI component -->
        <c:BlockUI />
        
        <!-- Action Status -->
        <apex:actionStatus onStart="blockMe();" onstop="unBlockMe();" id="waitMsg"/>
        
        <apex:pageBlock id="pb">
        
	        <!--Page Message  --> 
	        <apex:pageMessage summary="{!errMsg}" rendered="{!showErr}" severity="INFO" strength="3" id="msg"/>
         
            <apex:pageBlockButtons rendered="{!IF(products.Size > 0, true, false)}" >
                <apex:commandButton value="First" action="{!first}" status="waitMsg" reRender="pb"   />
                <apex:commandButton value="Previous" action="{!previous}" status="waitMsg" reRender="pb" rendered="{!IF(PreviousButtonDisabled  == true, false, true)}"   />
                <apex:commandButton action="{!next}" value="Next" status="waitMsg" reRender="pb" rendered="{!IF(NextButtonDisabled == true, false, true)}"   />
                <apex:commandButton value="Last" action="{!last}" status="waitMsg" reRender="pb" />
            	<apex:commandButton value="Save" action="{!saveResults}" status="waitMsg" reRender="pb"  />
            </apex:pageBlockButtons> 
            
            <apex:inputText value="{!searchString}" id="searchText" html-placeholder="Search..."/> &nbsp;&nbsp;&nbsp;
            <apex:commandButton value="Search" action="{!doSearch}" status="waitMsg" reRender="pb" id="searchButton"  />
            
            <apex:variable value="{!0}" var="index" />
            <apex:pageBlockSection collapsible="false" columns="1">
	            <apex:pageBlockTable value="{!productsList}" var="item" rendered="{!productsList.size > 0}">
	                <apex:column value="{!item.product.Name}"/>
	                <apex:column value="{!item.product.ProductCode}" />
	                <apex:column value="{!item.product.IsActive}" />
	                <apex:column value="{!item.product.Description}" />
	                <apex:column headerValue="Revenue Recognition Rule">
	                    <apex:inputField value="{!item.product.RevRecRule__c}"> 
                        <apex:variable value="{!index + 1}" var="index" /> 
                        </apex:inputField>
	                </apex:column> 
	            </apex:pageBlockTable>  
	            <apex:outputpanel rendered="{!productsList.size = 0}">
	            	No records to display.
	            </apex:outputpanel> 
            </apex:pageBlockSection>     
        </apex:pageBlock>
    </apex:form>
</apex:page>